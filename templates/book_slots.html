<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EasyBook - Book Appointment</title>

  <!-- Bootstrap (optional, but nice) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body>

<nav class="navbar navbar-light bg-light">
  <div class="container-fluid">
    <span class="navbar-brand mb-0 h1">EasyBook</span>
    <div class="d-flex">
      <a class="btn btn-outline-danger" href="{{ url_for('logout') }}">Logout</a>
    </div>
  </div>
</nav>

<div class="container mt-4">

  <h2>Book Appointment</h2>

  {% if error %}
    <div class="alert alert-warning mt-3">{{ error }}</div>
  {% endif %}

  <!-- Date picker (past dates disabled) -->
  <form method="GET" action="{{ url_for('book') }}" class="mt-3">
    <label for="date" class="form-label">Select Date</label>
    <input
      type="date"
      id="date"
      name="date"
      class="form-control"
      value="{{ selected_date }}"
      min="{{ today }}"
      onchange="this.form.submit()"
      required
    />
  </form>

  <hr class="my-4" />

  <h4>Available Slots</h4>

  {% if slots and slots|length > 0 %}
    <div class="row mt-3">
      {% for slot in slots %}
        <div class="col-6 col-md-3 mb-2">
          <form method="POST" action="{{ url_for('book', date=selected_date) }}">
            <input type="hidden" name="start_at" value="{{ slot.isoformat() }}">
            <button type="submit" class="btn btn-primary w-100">
              {{ slot.strftime("%I:%M %p") }}
            </button>
          </form>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <p class="mt-3">No available appointments for this day.</p>
  {% endif %}

</div>

</body>
</html>